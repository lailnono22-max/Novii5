# ๐ ุชุนูููุงุช ุฅุนุฏุงุฏ Supabase ูุชุทุจูู Novii - ุฎุทูุฉ ุจุฎุทูุฉ

## ๐ ูุธุฑุฉ ุนุงูุฉ
ูุฐุง ุงูุฏููู ูุดุฑุญ ุจุงูุชูุตูู ููููุฉ ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู Supabase. ุงููุดุฑูุน ูุญุชูู ุนูู ููููู SQL:
1. **`supabase_schema.sql`** - ุงูุฌุฏุงููุ ุงูุณูุงุณุงุช ุงูุฃูููุฉุ ูุงูู Triggers
2. **`supabase_functions.sql`** - ุงูุฏูุงู ุงููุณุงุนุฏุฉ ููุนุฏุงุฏุงุช

---

## ๐ฏ ุงูุฎุทูุฉ 1: ุฅุนุฏุงุฏ Schema ุงูุฑุฆูุณู

### 1.1 ุงูุชุญ Supabase Dashboard
1. ุงุฐูุจ ุฅูู: [https://app.supabase.com](https://app.supabase.com)
2. ุณุฌู ุงูุฏุฎูู ุฅูู ุญุณุงุจู
3. ุงุฎุชุฑ ูุดุฑูุน Novii (ุฃู ุฃูุดุฆ ูุดุฑูุน ุฌุฏูุฏ)

### 1.2 ุงูุชุญ SQL Editor
1. ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ ุงููุณุฑูุ ุงุถุบุท ุนูู **"SQL Editor"**
2. ุงุถุบุท ุนูู ุฒุฑ **"+ New Query"**

### 1.3 ุชุดุบูู supabase_schema.sql
1. โ ุงูุชุญ ููู **`supabase_schema.sql`** ูู Replit
2. โ ุงูุณุฎ **ูู** ุงููุญุชูู (Ctrl+A ุซู Ctrl+C)
3. โ ุงูุตูู ูู SQL Editor ูู Supabase
4. โ ุงุถุบุท ุนูู **"Run"** ุฃู ุงุถุบุท (Ctrl+Enter)
5. โ ุงูุชุธุฑ ุฑุณุงูุฉ **"Success"** โ

**ูุงุฐุง ุณูุชู ุฅูุดุงุคูุ**
- ๐๏ธ **10 ุฌุฏุงูู ุฑุฆูุณูุฉ:**
  - `profiles` - ุจูุงูุงุช ุงููุณุชุฎุฏููู
  - `posts` - ุงูููุดูุฑุงุช
  - `comments` - ุงูุชุนูููุงุช
  - `likes` - ุงูุฅุนุฌุงุจุงุช
  - `follows` - ุงููุชุงุจุนุงุช (Followers/Following)
  - `stories` - ุงููุตุต (24 ุณุงุนุฉ)
  - `story_views` - ูุดุงูุฏุงุช ุงููุตุต
  - `messages` - ุงูุฑุณุงุฆู ุงููุจุงุดุฑุฉ
  - `notifications` - ุงูุฅุดุนุงุฑุงุช
  - `saved_posts` - ุงูููุดูุฑุงุช ุงููุญููุธุฉ

- ๐ **Row Level Security (RLS)** - ุณูุงุณุงุช ุงูุฃูุงู ูุญูุงูุฉ ุงูุจูุงูุงุช
- โก **Indexes** - ูุชุญุณูู ุณุฑุนุฉ ุงูุงุณุชุนูุงูุงุช
- ๐ **Triggers** - ูุชุญุฏูุซ ุงูุนุฏุงุฏุงุช ุชููุงุฆูุงู
- ๐ค **Auto Profile Creation** - ุฅูุดุงุก ููู ุชุนุฑููู ุชููุงุฆูุงู ุนูุฏ ุงูุชุณุฌูู

---

## ๐๏ธ ุงูุฎุทูุฉ 2: ุฅุนุฏุงุฏ ุงูุฏูุงู ุงููุณุงุนุฏุฉ

### 2.1 ูุชุญ ุงุณุชุนูุงู ุฌุฏูุฏ
1. ูู SQL Editorุ ุงุถุบุท ุนูู **"+ New Query"** ูุฑุฉ ุฃุฎุฑู

### 2.2 ุชุดุบูู supabase_functions.sql
1. โ ุงูุชุญ ููู **`supabase_functions.sql`** ูู Replit
2. โ ุงูุณุฎ **ูู** ุงููุญุชูู
3. โ ุงูุตูู ูู SQL Editor ุงูุฌุฏูุฏ
4. โ ุงุถุบุท ุนูู **"Run"**
5. โ ุงูุชุธุฑ ุฑุณุงูุฉ **"Success"** โ

**ูุงุฐุง ุณูุชู ุฅูุดุงุคูุ**
- โ `increment_likes_count()` - ุฒูุงุฏุฉ ุนุฏุฏ ุงูุฅุนุฌุงุจุงุช
- โ `decrement_likes_count()` - ุชูููู ุนุฏุฏ ุงูุฅุนุฌุงุจุงุช
- โ `increment_comments_count()` - ุฒูุงุฏุฉ ุนุฏุฏ ุงูุชุนูููุงุช
- โ `decrement_comments_count()` - ุชูููู ุนุฏุฏ ุงูุชุนูููุงุช
- โ `increment_followers_count()` - ุฒูุงุฏุฉ ุนุฏุฏ ุงููุชุงุจุนูู
- โ `decrement_followers_count()` - ุชูููู ุนุฏุฏ ุงููุชุงุจุนูู
- โ `increment_following_count()` - ุฒูุงุฏุฉ ุนุฏุฏ ุงููุชุงุจูุนูู
- โ `decrement_following_count()` - ุชูููู ุนุฏุฏ ุงููุชุงุจูุนูู
- โ `increment_posts_count()` - ุฒูุงุฏุฉ ุนุฏุฏ ุงูููุดูุฑุงุช
- โ `decrement_posts_count()` - ุชูููู ุนุฏุฏ ุงูููุดูุฑุงุช

## ุงูุฎุทูุฉ 2: ุฅูุดุงุก ุฃูู ููู ุดุฎุตู

ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู ูุฃูู ูุฑุฉุ ุณุชุญุชุงุฌ ูุฅูุดุงุก ููู ุดุฎุตู:

```sql
-- ุงุณุชุจุฏู USER_ID ุจุงุณุชุฎุฏุงู ID ุงููุณุชุฎุฏู ูู auth.users
INSERT INTO profiles (id, username, full_name)
VALUES (
  'YOUR_USER_ID_FROM_AUTH',  -- ุงุณุชุจุฏู ูุฐุง
  'username',                 -- ุงุณู ุงููุณุชุฎุฏู ุงููุทููุจ
  'Your Full Name'           -- ุงูุงุณู ุงููุงูู
);
```

ุฃู ุณูุชู ุฅูุดุงุก ุงูููู ุงูุดุฎุตู ุชููุงุฆูุงู ุนูุฏ ุฃูู ุชุณุฌูู ุฏุฎูู.

## ุงูุฎุทูุฉ 3: ุฅุถุงูุฉ ุจูุงูุงุช ุชุฌุฑูุจูุฉ (ุงุฎุชูุงุฑู)

ูุงุฎุชุจุงุฑ ุงูุชุทุจููุ ููููู ุฅุถุงูุฉ ุจุนุถ ุงูููุดูุฑุงุช:

```sql
-- ุฅูุดุงุก ููุดูุฑ ุชุฌุฑูุจู
INSERT INTO posts (user_id, caption, image_url, location)
VALUES (
  'YOUR_USER_ID',
  'ููุดูุฑู ุงูุฃูู ุนูู Novii! ๐',
  'https://picsum.photos/600/800',
  'ุงูุฑูุงุถุ ุงูุณุนูุฏูุฉ'
);
```

## ุงูุชุญูู ูู ุงููุฌุงุญ

ุจุนุฏ ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ูุฌุจ ุฃู ุชููู ูุงุฏุฑุงู ุนูู:

- โ ุชุณุฌูู ุงูุฏุฎูู ูุงูุฎุฑูุฌ
- โ ุฑุคูุฉ ูููู ุงูุดุฎุตู
- โ ุฅูุดุงุก ููุดูุฑุงุช ุฌุฏูุฏุฉ
- โ ุงูุฅุนุฌุงุจ ูุงูุชุนููู ุนูู ุงูููุดูุฑุงุช
- โ ูุชุงุจุนุฉ ูุณุชุฎุฏููู ุขุฎุฑูู
- โ ุฅุฑุณุงู ุฑุณุงุฆู
- โ ุฑุคูุฉ ุงูุฅุดุนุงุฑุงุช

## ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ ุงููุทููุจุฉ

ุชุฃูุฏ ูู ุฅุถุงูุฉ ุงููุชุบูุฑุงุช ุงูุชุงููุฉ ูู Replit Secrets:

- `VITE_SUPABASE_URL` - ุฑุงุจุท ูุดุฑูุน Supabase
- `VITE_SUPABASE_ANON_KEY` - ุงูููุชุงุญ ุงูุนุงู ูู Supabase

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: "ูุง ุชูุฌุฏ ููุดูุฑุงุช"
- ุชุฃูุฏ ูู ุฅูุดุงุก ููุดูุฑ ูุงุญุฏ ุนูู ุงูุฃูู
- ุชุญูู ูู RLS policies ูู Supabase

### ุงููุดููุฉ: "ุฎุทุฃ ูู ุงูุงุชุตุงู"
- ุชุฃูุฏ ูู ุตุญุฉ VITE_SUPABASE_URL ู VITE_SUPABASE_ANON_KEY
- ุชุญูู ูู ุชุดุบูู SQL scripts ุจูุฌุงุญ

### ุงููุดููุฉ: "ุฎุทุฃ ูู ุฅูุดุงุก ุงูููู ุงูุดุฎุตู"
- ุชุฃูุฏ ูู ุชุดุบูู supabase_schema.sql ูุงููุงู
- ุชุญูู ูู ุฌุฏูู profiles ูู Supabase

## ููุงุญุธุงุช ูููุฉ

- ุฌููุน ุงูุฌุฏุงูู ูุญููุฉ ุจู Row Level Security
- ุงููุณุชุฎุฏููู ูููููู ููุท ุชุนุฏูู ุจูุงูุงุชูู ุงูุฎุงุตุฉ
- ุงููุตุต ุชูุชูู ุชููุงุฆูุงู ุจุนุฏ 24 ุณุงุนุฉ
- ุงูุชุทุจูู ูุณุชุฎุฏู Supabase Auth ูููุตุงุฏูุฉ

---

ูููุฒูุฏ ูู ุงููุณุงุนุฏุฉุ ุฑุงุฌุน:
- [Supabase Documentation](https://supabase.com/docs)
- [ููู DATABASE_SETUP.md](./DATABASE_SETUP.md)
